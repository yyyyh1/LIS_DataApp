<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>data entry</title>
</head>
<body>
  <form action="/add" method="post"  >
    <table>
      <tr>
        <td>Name(*)：</td>
        <td><input type="text" id="name" name="name" required></td>
      </tr>
      <tr>
        <td>Age：</td>
        <td><input type="text" id="age" name="age"></td>
      </tr>
      <tr>
        <td>Title(*)：</td>
        <td><input type="text" id="title" name="title" required></td>
      </tr>
      <tr>
        <td>Hometown：</td>
        <td><input type="text" id="hometown" name="hometown"></td>
      </tr>
      <tr>
        <td><input type="submit" id="submitBtn"></td>
      </tr>
    </table>
  </form>

  <script>
    // get elements and submit button
    var dataForm = document.getElementById('dataForm');
    var submitBtn = document.getElementById('submitBtn');

    // add event for submit
    submitBtn.addEventListener('click', function(event) {
      event.preventDefault(); // prevent default click event 阻止默认点击行为

      // get elements
      var name = document.getElementById('name').value;
      var age = document.getElementById('age').value;
      var title = document.getElementById('title').value;
      var hometown = document.getElementById('hometown').value;

      // check name not null
      if (name === '') {
        alert('Name is required.');
        return;
      }

      // check title not null
      if (title === '') {
        alert('title is required.');
        return;
      }


      // construct FormData object
      var formData = new FormData();
      formData.append('name', name);
      formData.append('age', age);
      formData.append('title', title);
      formData.append('hometown', hometown);

      // send POST request
      fetch('/add', {
        method: 'POST',
        body: formData
      })
              .then(response => {
                if (response.ok) {
                  // deal with success case
                  console.log('Data submitted successfully!');
                  window.open('confirm.html', '_blank'); // open confirmation window
                } else {
                  // deal with failed case
                  console.error('Failed to submit data.');
                }
              })
              .catch(error => {
                console.error('An error occurred:', error);
              });
    });
  </script>
</body>
</html>